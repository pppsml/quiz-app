class QuizScreen{constructor(){this.loadQuiz()}loadQuiz(){config.currentScreen="quiz",checkBurgerBtn(),quizContainer.innerHTML="",selectQuizContainer.innerHTML="";const e=getElement("button",["btn__styled","btn__big"],{id:"submitBtn",type:"submit",textContent:"Submit"});e.addEventListener("click",(()=>this.submitAnswer()));const t=getElement("button",["btn__styled","btn__big","dn"],{id:"nextBtn",type:"submit",textContent:"Next"});t.addEventListener("click",(()=>this.nextQuestion())),quizContainer.append(getElement("h2",["question","title","tal"],{id:"question",textContent:`${config.currentQuiz+1}. ${data.currentQuizData[config.currentQuiz].question}`}));let n=document.querySelector(".progressBar"),i=document.querySelector(".bar");n||(n=getElement("div",["progressBar"]),i=getElement("div",["bar"]),n.append(i));let r=100*((config.currentQuiz+1)/data.currentQuizData.length).toFixed(4);i.style.width=`${r}%`,quizContainer.append(n),quizContainer.append(this.loadAnswers()),quizContainer.append(e),quizContainer.append(t)}loadAnswers(){const e=getElement("ul",["answer__container"]);for(let t=0;t<data.currentQuizData[config.currentQuiz].answers.length;t++){const n=getElement("input",["answer__input"],{id:config.answerOptions[t],name:"answer",type:"radio"}),i=getElement("label",["answer__label"],{htmlFor:config.answerOptions[t],id:`${config.answerOptions[t]}_text`,textContent:data.currentQuizData[config.currentQuiz].answers[t]}),r=getElement("li",["text","answer"]);r.append(n),r.append(i),e.append(r)}const t=getElement("span",["dn"],{id:"marker"});return e.append(t),e.addEventListener("click",(e=>{if(e&&"LABEL"==e.target.tagName){const n=e.target.offsetHeight,i=e.target.parentElement.offsetTop;t.classList.remove("dn"),t.style.transform=`translateY(${i+n/2-t.offsetHeight/2}px)`}})),e}loadResults(){quizContainer.innerHTML="",quizContainer.append(getElement("h2",["text","title"],{innerText:"Congratulation!\nHave you finished the quiz!"})),quizContainer.append(getElement("p",["text"],{textContent:`You have answered correctly to ${config.score}/${data.currentQuizData.length}`}));const e=getElement("button",["btn__styled","btn__big"],{type:"submit",textContent:"Return to start screen"});function t(){const e=getElement("div",["row","text","row__btns","m0"],{id:"likeRow"}),t=getElement("button",["btn__styled","btn__small"],{id:"likeBtn",innerHTML:'Like<i class="fas fa-heart"></i>'});t.addEventListener("click",(()=>{data.docData[data.currentQuizId].plusLikes()}),{once:!0}),e.append(getElement("p",[],{textContent:"Did you like the quiz?"})),e.append(t),quizContainer.append(e)}e.addEventListener("click",startScreen),(0==data.isLikedQuizzes.length||-1==data.isLikedQuizzes.indexOf(data.currentQuizId))&&t(),quizContainer.append(e)}submitAnswer(){let e=this.getSelected();const t=data.currentQuizData[config.currentQuiz].correct;if(e){if(e==t)config.score++;else{document.querySelector(`input[id="${e}"]`).parentElement.classList.add("uncorrect")}const n=document.querySelector(".answer__container").querySelector(`input[id="${t}"]`);document.querySelector("#marker").style.display="none",n.parentElement.classList.add("correct");const i=document.getElementById("submitBtn"),r=document.getElementById("nextBtn");toggleElem(i),toggleElem(r)}}nextQuestion(){config.currentQuiz++,config.currentQuiz<data.currentQuizData.length?this.loadQuiz():this.loadResults()}getSelected(){const e=document.querySelectorAll(".answer__input");let t;if(e.forEach((e=>{!0===e.checked&&(t=e.id,e.checked=!1)})),t)for(let t=0;t<e.length;t++)e[t].parentElement.classList.add("disabled"),e[t].disabled=!0;return t}}